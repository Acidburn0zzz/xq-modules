<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Higher-Order XQuery Libraries</title>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <h2>Library Module: ordered-map.xqm</h2>
    <table>
      <tr>
        <td>
          <b>URI:</b>
        </td>
        <td>
          <code>http://www.woerteler.de/xquery/modules/ordered-map</code>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Abstract interface for an ordered map.</td>
      </tr>
      <tr>
        <td>
          <b>Author:</b>
        </td>
        <td>Leo Woerteler &lt;leo@woerteler.de&gt;</td>
      </tr>
      <tr>
        <td>
          <b>Version:</b>
        </td>
        <td>0.1</td>
      </tr>
    </table>
    <h2>Functions</h2>
    <h3>check($m, $min, $max, $msg)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$m</code>
              </td>
              <td>
                <code>function(*)</code>
              </td>
              <td>the map to check</td>
            </tr>
            <tr>
              <td>
                <code>$min</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$max</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <code>$msg</code>
              </td>
              <td>
                <code>xs:string</code>
              </td>
              <td></td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>function(*)</code>
              </td>
              <td>the map</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Checks the structural consistency of the given map.</td>
      </tr>
    </table>
    <h3>contains($m, $k)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$m</code>
              </td>
              <td>
                <code>function(*)</code>
              </td>
              <td>map to look in</td>
            </tr>
            <tr>
              <td>
                <code>$k</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>key to look for</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>xs:boolean</code>
              </td>
              <td>
                <code>true()</code> if the key is in the map, <code>false()</code> otherwise</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Checks if the given map contains an entry with the given key.</td>
      </tr>
    </table>
    <h3>delete($m, $k)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$m</code>
              </td>
              <td>
                <code>function(*)</code>
              </td>
              <td>map to delete from</td>
            </tr>
            <tr>
              <td>
                <code>$k</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>key to delete</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>function(*)</code>
              </td>
              <td>map that does not contain the deleted key</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Deletes the given key from the map if it exists.</td>
      </tr>
    </table>
    <h3>fold($m, $z, $f)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$m</code>
              </td>
              <td>
                <code>function(*)</code>
              </td>
              <td>the map to fold</td>
            </tr>
            <tr>
              <td>
                <code>$z</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>starting value</td>
            </tr>
            <tr>
              <td>
                <code>$f</code>
              </td>
              <td>
                <code>function(item()*, item()*, item()*) as item()*</code>
              </td>
              <td>combining function</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>the folded value</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Combines all entries in the given map in ascending order using
the user-supplied function <code>$f</code>.
For a map <code>$m</code> containing the entries
<code>{($k1, $v1), ($k2, $v2), ($k3, $v3)}</code>
with <code>$k1 &lt; $k2 &lt; $k3</code>, the call <code>fold($m, $z, $f)</code>
would return <code>$f($f($f($z, $k1, $v1), $k2, $v2), $k3, $v3)</code>.</td>
      </tr>
    </table>
    <h3>for-each-entry($m, $f)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$m</code>
              </td>
              <td>
                <code>function(*)</code>
              </td>
              <td>the map to iterate over</td>
            </tr>
            <tr>
              <td>
                <code>$f</code>
              </td>
              <td>
                <code>function(item()*, item()*) as item()*</code>
              </td>
              <td>binary function taking the key and value of the entry</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>concatenated results of the calls to <code>$f</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Calls the given function for every entry in the map and concatenates the result sequences.</td>
      </tr>
    </table>
    <h3>get($m, $k)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$m</code>
              </td>
              <td>
                <code>function(*)</code>
              </td>
              <td>the map</td>
            </tr>
            <tr>
              <td>
                <code>$k</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>key to look up</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>the bound value if the key exists in the map, <code>()</code> otherwise</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Gets the value bound to the given key in the given map.</td>
      </tr>
    </table>
    <h3>insert($m, $k, $v)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$m</code>
              </td>
              <td>
                <code>function(*)</code>
              </td>
              <td>map to insert into</td>
            </tr>
            <tr>
              <td>
                <code>$k</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>key to insert</td>
            </tr>
            <tr>
              <td>
                <code>$v</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>value to insert</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>the new map</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Inserts the given key and value into the given map and returns the new map.</td>
      </tr>
    </table>
    <h3>lookup($m, $k, $found, $notFound)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$m</code>
              </td>
              <td>
                <code>function(*)</code>
              </td>
              <td>the map to search in</td>
            </tr>
            <tr>
              <td>
                <code>$k</code>
              </td>
              <td>
                <code>item()*</code>
              </td>
              <td>key to look up</td>
            </tr>
            <tr>
              <td>
                <code>$found</code>
              </td>
              <td>
                <code>function(item()*) as item()*</code>
              </td>
              <td>callback for when the key was found</td>
            </tr>
            <tr>
              <td>
                <code>$notFound</code>
              </td>
              <td>
                <code>function() as item()*</code>
              </td>
              <td>callback for when the key was not found</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>item()*</code>
              </td>
              <td>result from the callback</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Looks up the given key in the given map and calls the corresponding callback.</td>
      </tr>
    </table>
    <h3>new($lt)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$lt</code>
              </td>
              <td>
                <code>function(item()*, item()*) as xs:boolean</code>
              </td>
              <td>less-than predicate</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>function(*)</code>
              </td>
              <td>the empty map</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Creates a new map with the given less-than predicate.</td>
      </tr>
    </table>
    <h3>size($m)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$m</code>
              </td>
              <td>
                <code>function(*)</code>
              </td>
              <td>map to determine the number of entries of</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>xs:integer</code>
              </td>
              <td>number of entries</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Determines the number of entries in the given map.</td>
      </tr>
    </table>
    <h3>to-xml($m)</h3>
    <table>
      <tr>
        <td>
          <b>Arguments:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>$m</code>
              </td>
              <td>
                <code>function(*)</code>
              </td>
              <td>the map</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Returns:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>document-node()</code>
              </td>
              <td>structure of <code>$m</code> as XML document</td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Annotations:</b>
        </td>
        <td>
          <table>
            <tr>
              <td>
                <code>%public</code>
              </td>
            </tr>
          </table>
        </td>
      </tr>
      <tr>
        <td>
          <b>Description:</b>
        </td>
        <td>Returns an XML document showing the inner structure of the given map.</td>
      </tr>
    </table>
  </body>
</html>